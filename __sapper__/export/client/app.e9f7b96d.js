import{S as e,i as t,s as n,U as o,a as s,G as a,t as r,q as c,f as l,g as $,H as i,d as f,j as m,I as p,v as u,w as g,J as d,V as h,o as j,O as y,e as b,c as w,b as k,h as v,L as x,W as G,M as P,K as A,X as E,k as L,p as M,n as q}from"./client.fe6509d5.js";import{c as J,M as N,G as R,a as S,b as z}from"./MapLayer.13fc4a1d.js";class C extends e{constructor(e){super(),t(this,e,null,null,n,{})}}const D=o(!0),{document:I}=y;function O(e){let t,n,o;return n=new R({}),{c(){t=b("div"),a(n.$$.fragment),this.h()},l(e){t=w(e,"DIV",{class:!0,slot:!0});var o=k(t);i(n.$$.fragment,o),o.forEach(l),this.h()},h(){v(t,"class","geocoder svelte-19kksln"),v(t,"slot","search")},m(e,s){m(e,t,s),p(n,t,null),o=!0},i(e){o||(u(n.$$.fragment,e),o=!0)},o(e){g(n.$$.fragment,e),o=!1},d(e){e&&l(t),d(n)}}}function U(e){let t,n,o,s={ctx:e,current:null,token:null,hasCatch:!0,pending:W,then:H,catch:V,value:1,error:10,blocks:[,,,]};return G(n=e[0],s),{c(){t=x(),s.block.c()},l(e){t=x(),s.block.l(e)},m(e,n){m(e,t,n),s.block.m(e,s.anchor=n),s.mount=()=>t.parentNode,s.anchor=t,o=!0},p(t,o){if(e=t,s.ctx=e,1&o&&n!==(n=e[0])&&G(n,s));else{const t=e.slice();t[1]=t[10]=s.resolved,s.block.p(t,o)}},i(e){o||(u(s.block),o=!0)},o(e){for(let e=0;e<3;e+=1){const t=s.blocks[e];g(t)}o=!1},d(e){e&&l(t),s.block.d(e),s.token=null,s=null}}}function V(e){let t,n,o=e[10].message+"";return{c(){t=b("p"),n=r(o),this.h()},l(e){t=w(e,"P",{style:!0});var s=k(t);n=f(s,o),s.forEach(l),this.h()},h(){E(t,"color","red")},m(e,o){m(e,t,o),L(t,n)},p(e,t){1&t&&o!==(o=e[10].message+"")&&M(n,o)},i:q,o:q,d(e){e&&l(t)}}}function H(e){let t,n;return t=new S({props:{id:"data",data:e[1],$$slots:{default:[K]},$$scope:{ctx:e}}}),{c(){a(t.$$.fragment)},l(e){i(t.$$.fragment,e)},m(e,o){p(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.data=e[1]),2048&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){d(t,e)}}}function K(e){let t,n;return t=new z({props:{type:Y,paint:e[2]}}),{c(){a(t.$$.fragment)},l(e){i(t.$$.fragment,e)},m(e,o){p(t,e,o),n=!0},p:q,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){d(t,e)}}}function W(e){let t,n;return t=new C({}),{c(){a(t.$$.fragment)},l(e){i(t.$$.fragment,e)},m(e,o){p(t,e,o),n=!0},p:q,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){d(t,e)}}}function X(e){let t,n;return t=new S({props:{id:"data",data:e[1],$$slots:{default:[B]},$$scope:{ctx:e}}}),{c(){a(t.$$.fragment)},l(e){i(t.$$.fragment,e)},m(e,o){p(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.data=e[1]),2048&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){d(t,e)}}}function B(e){let t,n;return t=new z({props:{type:Y,paint:e[2]}}),{c(){a(t.$$.fragment)},l(e){i(t.$$.fragment,e)},m(e,o){p(t,e,o),n=!0},p:q,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){d(t,e)}}}function F(e){let t,n,o,a,r=e[0]&&U(e),c=e[1].features&&X(e);return{c(){t=s(),r&&r.c(),n=s(),c&&c.c(),o=x()},l(e){t=$(e),r&&r.l(e),n=$(e),c&&c.l(e),o=x()},m(e,s){m(e,t,s),r&&r.m(e,s),m(e,n,s),c&&c.m(e,s),m(e,o,s),a=!0},p(e,t){e[0]?r?(r.p(e,t),1&t&&u(r,1)):(r=U(e),r.c(),u(r,1),r.m(n.parentNode,n)):r&&(P(),g(r,1,1,(()=>{r=null})),A()),e[1].features?c?(c.p(e,t),2&t&&u(c,1)):(c=X(e),c.c(),u(c,1),c.m(o.parentNode,o)):c&&(P(),g(c,1,1,(()=>{c=null})),A())},i(e){a||(u(r),u(c),a=!0)},o(e){g(r),g(c),a=!1},d(e){e&&l(t),r&&r.d(e),e&&l(n),c&&c.d(e),e&&l(o)}}}function Q(e){let t,n,o,h;return n=new N({props:{navigationPosition:"top-left",geolocatePosition:"top-right",$$slots:{default:[F],search:[O]},$$scope:{ctx:e}}}),{c(){t=s(),a(n.$$.fragment),o=r("\n\n."),this.h()},l(e){c('[data-svelte="svelte-16c6qza"]',I.head).forEach(l),t=$(e),i(n.$$.fragment,e),o=f(e,"\n\n."),this.h()},h(){I.title="App"},m(e,s){m(e,t,s),p(n,e,s),m(e,o,s),h=!0},p(e,[t]){const o={};2051&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){h||(u(n.$$.fragment,e),h=!0)},o(e){g(n.$$.fragment,e),h=!1},d(e){e&&l(t),d(n,e),e&&l(o)}}}async function T(e,t){if("undefined"==typeof document)return;let n;console.log("PRELOAD APP");const o=new URL(J.data.baseurl+J.data.query),s=this.fetch(o);return D.subscribe((e=>{n=e}))(),n?s.then((e=>e.json())).then((e=>({geojson:e}))):{geojson:s}}const Y="circle";function Z(e,t,n){let o;h(e,D,(e=>n(5,o=e)));let{geojson:s}=t,{getGeojson:a}=t,{asyncGeojson:r}=t;return j((()=>{console.log("mount app.svelte"),console.log(o),o?D.set(!1):s instanceof Promise&&(console.log("CSR !!! get Promise"),n(3,a=async()=>{const e=await s;if(e.ok){return await e.json()}throw new Error("Something went wrong")}),n(0,r=a()))})),e.$$set=e=>{"geojson"in e&&n(1,s=e.geojson),"getGeojson"in e&&n(3,a=e.getGeojson),"asyncGeojson"in e&&n(0,r=e.asyncGeojson)},[r,s,{"circle-radius":["interpolate",["linear"],["zoom"],8,1,15,2,22,15],"circle-opacity":.8,"circle-color":["match",["get","stadedeveloppement"],"A","#317256","J","#398564","JA","#419873","M","#49ab81","#52bf90"]},a]}export default class extends e{constructor(e){super(),t(this,e,Z,Q,n,{geojson:1,getGeojson:3,asyncGeojson:0})}}export{T as preload};
