import{_ as n,a as t,b as e,c as o,i as r,s as c,d as a,S as u,a4 as i,r as f,f as s,N as l,t as p,q as $,k as m,l as d,O as g,j as h,n as v,P as y,u as b,B as x,C as j,Q as k,a5 as w,x as R,X as P,e as G,g as D,h as A,m as E,T as S,a6 as N,U as q,R as C,a7 as L,o as M,y as z,p as J}from"./client.a398c92a.js";import{_ as O}from"./asyncToGenerator.5229e80b.js";import{c as T,M as U,G as _,a as B,b as I}from"./MapLayer.550e323e.js";function Q(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,c=t(n);if(o){var a=t(this).constructor;r=Reflect.construct(c,arguments,a)}else r=c.apply(this,arguments);return e(this,r)}}var V=function(t){n(i,u);var e=Q(i);function i(n){var t;return o(this,i),t=e.call(this),r(a(t),n,null,null,c,{}),t}return i}(),X=i(!0);function F(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,c=t(n);if(o){var a=t(this).constructor;r=Reflect.construct(c,arguments,a)}else r=c.apply(this,arguments);return e(this,r)}}var H=P.document;function K(n){var t,e,o;return e=new _({}),{c:function(){t=G("div"),l(e.$$.fragment),this.h()},l:function(n){t=D(n,"DIV",{class:!0,slot:!0});var o=A(t);g(e.$$.fragment,o),o.forEach(m),this.h()},h:function(){E(t,"class","geocoder svelte-19kksln"),E(t,"slot","search")},m:function(n,r){v(n,t,r),y(e,t,null),o=!0},i:function(n){o||(x(e.$$.fragment,n),o=!0)},o:function(n){j(e.$$.fragment,n),o=!1},d:function(n){n&&m(t),k(e)}}}function W(n){var t,e,o,r={ctx:n,current:null,token:null,hasCatch:!0,pending:tn,then:Z,catch:Y,value:1,error:10,blocks:[,,,]};return N(e=n[0],r),{c:function(){t=S(),r.block.c()},l:function(n){t=S(),r.block.l(n)},m:function(n,e){v(n,t,e),r.block.m(n,r.anchor=e),r.mount=function(){return t.parentNode},r.anchor=t,o=!0},p:function(t,o){if(n=t,r.ctx=n,1&o&&e!==(e=n[0])&&N(e,r));else{var c=n.slice();c[1]=c[10]=r.resolved,r.block.p(c,o)}},i:function(n){o||(x(r.block),o=!0)},o:function(n){for(var t=0;t<3;t+=1){var e=r.blocks[t];j(e)}o=!1},d:function(n){n&&m(t),r.block.d(n),r.token=null,r=null}}}function Y(n){var t,e,o=n[10].message+"";return{c:function(){t=G("p"),e=p(o),this.h()},l:function(n){t=D(n,"P",{style:!0});var r=A(t);e=h(r,o),r.forEach(m),this.h()},h:function(){L(t,"color","red")},m:function(n,o){v(n,t,o),M(t,e)},p:function(n,t){1&t&&o!==(o=n[10].message+"")&&z(e,o)},i:J,o:J,d:function(n){n&&m(t)}}}function Z(n){var t,e;return t=new B({props:{id:"data",data:n[1],$$slots:{default:[nn]},$$scope:{ctx:n}}}),{c:function(){l(t.$$.fragment)},l:function(n){g(t.$$.fragment,n)},m:function(n,o){y(t,n,o),e=!0},p:function(n,e){var o={};1&e&&(o.data=n[1]),2048&e&&(o.$$scope={dirty:e,ctx:n}),t.$set(o)},i:function(n){e||(x(t.$$.fragment,n),e=!0)},o:function(n){j(t.$$.fragment,n),e=!1},d:function(n){k(t,n)}}}function nn(n){var t,e;return t=new I({props:{type:fn,paint:n[2]}}),{c:function(){l(t.$$.fragment)},l:function(n){g(t.$$.fragment,n)},m:function(n,o){y(t,n,o),e=!0},p:J,i:function(n){e||(x(t.$$.fragment,n),e=!0)},o:function(n){j(t.$$.fragment,n),e=!1},d:function(n){k(t,n)}}}function tn(n){var t,e;return t=new V({}),{c:function(){l(t.$$.fragment)},l:function(n){g(t.$$.fragment,n)},m:function(n,o){y(t,n,o),e=!0},p:J,i:function(n){e||(x(t.$$.fragment,n),e=!0)},o:function(n){j(t.$$.fragment,n),e=!1},d:function(n){k(t,n)}}}function en(n){var t,e;return t=new B({props:{id:"data",data:n[1],$$slots:{default:[on]},$$scope:{ctx:n}}}),{c:function(){l(t.$$.fragment)},l:function(n){g(t.$$.fragment,n)},m:function(n,o){y(t,n,o),e=!0},p:function(n,e){var o={};2&e&&(o.data=n[1]),2048&e&&(o.$$scope={dirty:e,ctx:n}),t.$set(o)},i:function(n){e||(x(t.$$.fragment,n),e=!0)},o:function(n){j(t.$$.fragment,n),e=!1},d:function(n){k(t,n)}}}function on(n){var t,e;return t=new I({props:{type:fn,paint:n[2]}}),{c:function(){l(t.$$.fragment)},l:function(n){g(t.$$.fragment,n)},m:function(n,o){y(t,n,o),e=!0},p:J,i:function(n){e||(x(t.$$.fragment,n),e=!0)},o:function(n){j(t.$$.fragment,n),e=!1},d:function(n){k(t,n)}}}function rn(n){var t,e,o,r,c=n[0]&&W(n),a=n[1].features&&en(n);return{c:function(){t=s(),c&&c.c(),e=s(),a&&a.c(),o=S()},l:function(n){t=d(n),c&&c.l(n),e=d(n),a&&a.l(n),o=S()},m:function(n,u){v(n,t,u),c&&c.m(n,u),v(n,e,u),a&&a.m(n,u),v(n,o,u),r=!0},p:function(n,t){n[0]?c?(c.p(n,t),1&t&&x(c,1)):((c=W(n)).c(),x(c,1),c.m(e.parentNode,e)):c&&(q(),j(c,1,1,(function(){c=null})),C()),n[1].features?a?(a.p(n,t),2&t&&x(a,1)):((a=en(n)).c(),x(a,1),a.m(o.parentNode,o)):a&&(q(),j(a,1,1,(function(){a=null})),C())},i:function(n){r||(x(c),x(a),r=!0)},o:function(n){j(c),j(a),r=!1},d:function(n){n&&m(t),c&&c.d(n),n&&m(e),a&&a.d(n),n&&m(o)}}}function cn(n){var t,e,o,r;return e=new U({props:{navigationPosition:"top-left",geolocatePosition:"top-right",$$slots:{default:[rn],search:[K]},$$scope:{ctx:n}}}),{c:function(){t=s(),l(e.$$.fragment),o=p("\n\n."),this.h()},l:function(n){$('[data-svelte="svelte-16c6qza"]',H.head).forEach(m),t=d(n),g(e.$$.fragment,n),o=h(n,"\n\n."),this.h()},h:function(){H.title="App"},m:function(n,c){v(n,t,c),y(e,n,c),v(n,o,c),r=!0},p:function(n,t){var o=b(t,1)[0],r={};2051&o&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i:function(n){r||(x(e.$$.fragment,n),r=!0)},o:function(n){j(e.$$.fragment,n),r=!1},d:function(n){n&&m(t),k(e,n),n&&m(o)}}}function an(n,t){return un.apply(this,arguments)}function un(){return(un=O(f.mark((function n(t,e){var o,r,c;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("undefined"!=typeof document){n.next=2;break}return n.abrupt("return");case 2:console.log("PRELOAD APP"),n.next=5;break;case 5:if(r=new URL(T.data.baseurl+T.data.query),c=this.fetch(r),X.subscribe((function(n){o=n}))(),o){n.next=11;break}return n.abrupt("return",{geojson:c});case 11:return n.abrupt("return",c.then((function(n){return n.json()})).then((function(n){return{geojson:n}})));case 12:case"end":return n.stop()}}),n,this)})))).apply(this,arguments)}var fn="circle";function sn(n,t,e){var o;w(n,X,(function(n){return e(5,o=n)}));var r=t.geojson,c=t.getGeojson,a=void 0===c?void 0:c,u=t.asyncGeojson,i=void 0===u?void 0:u;return R((function(){console.log("mount app.svelte"),console.log(o),o?X.set(!1):r instanceof Promise&&(console.log("CSR !!! get Promise"),e(3,a=function(){var n=O(f.mark((function n(){var t,e;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r;case 2:if(!(t=n.sent).ok){n.next=10;break}return n.next=6,t.json();case 6:return e=n.sent,n.abrupt("return",e);case 10:throw new Error("Something went wrong");case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()),e(0,i=a()))})),n.$$set=function(n){"geojson"in n&&e(1,r=n.geojson),"getGeojson"in n&&e(3,a=n.getGeojson),"asyncGeojson"in n&&e(0,i=n.asyncGeojson)},[i,r,{"circle-radius":["interpolate",["linear"],["zoom"],8,1,15,2,22,15],"circle-opacity":.8,"circle-color":["match",["get","stadedeveloppement"],"A","#317256","J","#398564","JA","#419873","M","#49ab81","#52bf90"]},a]}var ln=function(t){n(i,u);var e=F(i);function i(n){var t;return o(this,i),t=e.call(this),r(a(t),n,sn,cn,c,{geojson:1,getGeojson:3,asyncGeojson:0}),t}return i}();export default ln;export{an as preload};
