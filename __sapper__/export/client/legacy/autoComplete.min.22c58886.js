import{V as e}from"./client.4b9b488b.js";var t=e((function(e,t){var n;n=function(){function e(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function t(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){var n,r;n=t,e=i[r=e],r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function r(e,t){for(var n=document.getElementsByClassName(e.resultsList.className),i=0;i<n.length;i++)t!==n[i]&&t!==e.inputField&&n[i].parentNode.removeChild(n[i]);e.inputField.removeAttribute("aria-activedescendant"),e.inputField.setAttribute("aria-expanded",!1)}function o(e,n,i){var r,o,s=(r=e,(o=document.createElement(r.resultsList.element)).setAttribute("id",r.resultsList.idName),o.setAttribute("aria-label",r.name),o.setAttribute("class",r.resultsList.className),o.setAttribute("role","listbox"),o.setAttribute("tabindex","-1"),r.resultsList.container&&r.resultsList.container(o),document.querySelector(r.resultsList.destination).insertAdjacentElement(r.resultsList.position,o),o);e.inputField.setAttribute("aria-expanded",!0);for(var a=function(r){var o,a,l,u,c=n.results[r];(u=(o=c,a=r,l=e,(u=document.createElement(l.resultItem.element)).setAttribute("id","".concat(l.resultItem.className,"_").concat(a)),u.setAttribute("class",l.resultItem.className),u.setAttribute("role","option"),u.innerHTML=o.match,l.resultItem.content&&l.resultItem.content(o.value,u),u)).addEventListener("click",(function(){var o={matches:i,input:n.input,query:n.query,results:n.results,selection:t(t({},c),{},{index:r})};e.onSelection&&e.onSelection(o)})),s.appendChild(u)},l=0;l<n.results.length;l++)a(l);return s}function s(e,t,n){e.dispatchEvent(new CustomEvent(n,{bubbles:!0,detail:t,cancelable:!0}))}return function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=void 0===(y=t.name)?"Search":y,i=void 0===(I=t.selector)?"#autoComplete":I,r=(S=t.data).src,o=S.key,s=void 0!==(g=S.cache)&&g,a=S.store,l=t.query,u=void 0===(k=(O=void 0===(O=t.trigger)?{}:O).event)?["input"]:k,c=void 0!==(L=O.condition)&&L,d=void 0===(C=t.searchEngine)?"strict":C,h=void 0!==(A=t.diacritics)&&A,p=void 0===(N=t.threshold)?1:N,f=void 0===(E=t.debounce)?0:E,v=void 0===(w=(x=void 0===(x=t.resultsList)?{}:x).render)||w,m=void 0!==(j=x.container)&&j,b=x.destination,y=void 0===(F=x.position)?"afterend":F,g=void 0===(I=x.element)?"ul":I,k=void 0===(S=x.idName)?"autoComplete_list":S,L=void 0===(O=x.className)?"autoComplete_list":O,A=void 0!==(C=x.navigation)&&C,E=void 0!==(N=t.sort)&&N,w=t.placeHolder,F=void 0===(j=t.maxResults)?5:j,O=void 0!==(S=(I=void 0===(I=t.resultItem)?{}:I).content)&&S,C=void 0===(x=I.element)?"li":x,j=void 0===(N=I.idName)?"autoComplete_result":N,x=void 0===(S=I.className)?"autoComplete_result":S,N=t.noResults,S=void 0!==(I=t.highlight)&&I,I=t.feedback;t=t.onSelection;this.name=n,this.selector=i,this.data={src:r,key:o,cache:s,store:a},this.query=l,this.trigger={event:u,condition:c},this.searchEngine=d,this.diacritics=h,this.threshold=p,this.debounce=f,this.resultsList={render:v,container:m,destination:b||this.selector,position:y,element:g,idName:k,className:L,navigation:A},this.sort=E,this.placeHolder=w,this.maxResults=F,this.resultItem={content:O,element:C,idName:j,className:x},this.noResults=N,this.highlight=S,this.feedback=I,this.onSelection=t,this.preInit()}var n;return(n=[{key:"start",value:function(e,n){var a=this,l=function(e,t){for(var n=[],r=function(r){function o(i){var o=(i?s[i]:s).toString();o&&((o="function"==typeof e.searchEngine?e.searchEngine(t,o):function(e,t,n){var i=n.diacritics?t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):t.toLowerCase();if("loose"===n.searchEngine){e=e.replace(/ /g,"");for(var r=[],o=0,s=0;s<i.length;s++){var a=t[s];o<e.length&&i[s]===e[o]&&(a=n.highlight?'<span class="autoComplete_highlighted">'.concat(a,"</span>"):a,o++),r.push(a)}if(o===e.length)return r.join("")}else if(i.includes(e))return e=new RegExp("".concat(e),"i").exec(t),n.highlight?t.replace(e,'<span class="autoComplete_highlighted">'.concat(e,"</span>")):t}(t,o,e))&&i?n.push({key:i,index:r,match:o,value:s}):o&&!i&&n.push({index:r,match:o,value:s}))}var s=e.data.store[r];if(e.data.key){var a,l=i(e.data.key);try{for(l.s();!(a=l.n()).done;)o(a.value)}catch(o){l.e(o)}finally{l.f()}}else o()},o=0;o<e.data.store.length;o++)r(o);return e.sort?n.sort(e.sort):n}(this,n);n={input:e,query:n,matches:l,results:l.slice(0,this.maxResults)};return s(this.inputField,n,"results"),l.length?this.resultsList.render?(l.length&&o(this,n,l),s(this.inputField,n,"rendered"),function(e,n){function i(e,i,r,l){e.preventDefault(),r?o++:o--,a(i),l.inputField.setAttribute("aria-activedescendant",i[o].id),s(e.srcElement,t(t({event:e},n),{},{selection:n.results[o]}),"navigation")}var o=-1,a=function(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("aria-selected"),e[t].classList.remove("autoComplete_selected")}(e),o>=e.length&&(o=0),o<0&&(o=e.length-1),e[o].setAttribute("aria-selected","true"),e[o].classList.add("autoComplete_selected")},l=e.resultsList.navigation||function(t){var n=document.getElementById(e.resultsList.idName);if(!n)return e.inputField.removeEventListener("keydown",l);n=n.getElementsByTagName(e.resultItem.element),27===t.keyCode?(e.inputField.value="",r(e)):40===t.keyCode||9===t.keyCode?i(t,n,!0,e):38===t.keyCode||9===t.keyCode?i(t,n,!1,e):13===t.keyCode&&(t.preventDefault(),-1<o&&n&&n[o].click())};e.inputField.addEventListener("keydown",l)}(this,n),void document.addEventListener("click",(function(e){return r(a,e.target)}))):this.feedback(n):this.noResults?this.noResults(n,o):null}},{key:"dataStore",value:function(){var e=this;return new Promise((function(t,n){return e.data.cache&&e.data.store?t(null):new Promise((function(t,n){return"function"==typeof e.data.src?e.data.src().then(t,n):t(e.data.src)})).then((function(i){try{return e.data.store=i,s(e.inputField,e.data.store,"fetch"),t()}catch(i){return n(i)}}),n)}))}},{key:"compose",value:function(){var e=this;return new Promise((function(t,n){var i,o,s,a;return a=e.inputField,s=i=(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?a.value:a.innerHTML).toLowerCase(),a=e.query,o=a&&a.manipulate?a.manipulate(s):s.normalize("NFD").replace(/[\u0300-\u036f]/g,""),a=o,((s=e).trigger.condition?s.trigger.condition(a):a.length>=s.threshold&&a.replace(/ /g,"").length)?e.dataStore().then((function(t){try{return r(e),e.start(i,o),l.call(e)}catch(t){return n(t)}}),n):(r(e),l.call(e));function l(){return t()}}))}},{key:"init",value:function(){var e,t,n,i,r=this;this.inputField=document.querySelector(this.selector),(e=this).inputField.setAttribute("type","text"),e.inputField.setAttribute("role","combobox"),e.inputField.setAttribute("aria-haspopup",!0),e.inputField.setAttribute("aria-expanded",!1),e.inputField.setAttribute("aria-controls",e.resultsList.idName),e.inputField.setAttribute("aria-autocomplete","both"),this.placeHolder&&this.inputField.setAttribute("placeholder",this.placeHolder),this.hook=(t=function(){r.compose()},n=this.debounce,function(){var e=this,r=arguments;clearTimeout(i),i=setTimeout((function(){return t.apply(e,r)}),n)}),this.trigger.event.forEach((function(e){r.inputField.addEventListener(e,r.hook)})),s(this.inputField,null,"init")}},{key:"preInit",value:function(){var e=this,t=document;new MutationObserver((function(n,r){var o,a=t.querySelector(e.selector),l=i(n);try{for(l.s();!(o=l.n()).done;)o.value,a&&(r.disconnect(),s(a,null,"connect"),e.init())}catch(n){l.e(n)}finally{l.f()}})).observe(t,{childList:!0,subtree:!0})}},{key:"unInit",value:function(){this.inputField.removeEventListener("input",this.hook),s(this.inputField,null,"unInit")}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,n),e}()},e.exports=n()})),n=Object.freeze(Object.assign(Object.create(null),t,{default:t,__moduleExports:t}));export{n as a};
